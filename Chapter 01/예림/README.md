# Chapter 01. 함수형 프로그래밍 소개

## 1.1 어떤 것이 언어를 '함수형'으로 만드는가?
- 언어를 '함수형'으로 규정하는 데 어떤 요소들이 필요한가?
- 프로그래밍 언어가 추상 함수<sub>abstract function</sub>를 생성하고 조합함으로써 논리 연산을 표현할 수 있을 때 함수형 언어로 간주된다.
  - 람다 대수에 뿌리를 둔 개념
### 람다 대수
- 추상 함수를 이용하여 수학 연산을 표현하고, 이를 변수에 바인딩하는 방법

**세 가지 구성 요소**
- 추상화 : 단일 입력을 받는 익명함수, 즉 람다
- 응용 : 값에 추상화가 적용되어 결과를 생성한다. (함수나 메서드 호출)
- 베타 축약 : 추상화된 변수를 적용된 인수로 대체한다.
  $$ f = \lambda x E $$
  - `수학적 함수 선언식`을 의미
  - 각 항의 의미
    - $x$ : 값을 나타내는 변수나 인수
    - $E$ : 논리를 포함하는 표현식 또는 용어
    - $\lambda x E$ : 단일 입력을 받는 추상화된 익명 함수
    - $f$ : 추상화에 인수를 적용하는 결과 함수

- 이러한 부분들은 자바의 람다와 구현 방식이 거의 유사
  - 이차 함숫값을 계산하기 위한 함수의 추상화인 $\lambda x .x*x$는 자바 버전과 거의 동일하게 표현됨
    ```java
    Function<Integer, Integer> quadratic = value -> value * value;
    ```

- 함수형 프로그래밍이 되기 위해서는 제어 흐름이나 알고리즘을 설명하지 않고, 연산의 논리를 `선언적 문장`으로 표현할 수 있어야 함
- 선언적 프로그래밍에서는 문장이 아닌 표현식을 사용하여 결과와 프로그램이 작동하는 방식을 설명
- 즉, 무엇을 해야 하는지가 아닌 **무엇을 원하는지를 표현**한다.
- 자바의 표현식<sub>expression</sub>은 연산자, 피연산자, 메서드 호출로 구성
- 자바의 문장<sub>statement</sub>은 코드가 수행하는 동작을 기술한 독립적인 실행 단위 / 리턴값이 없는 메서드 호출을 포함
- 표현식과 문장의 기본적인 차이는 **값의 변환 유무**
- 자바와 같은 다중 패러다임 언어에서는 종종 이들 사이의 경계가 모호함.


```java
int newTreasuresFound = foundTreasure(6);
```
- `findTreasure(6)` 함수 호출은 함수형 표현식이지만 `newTreasuresFound`은 문장이다.

## 1.2 함수형 프로그래밍의 개념
- 함수형 프로그래밍은 주로 추상 함수에 기반을 두고 있으며 이 패러다임을 구성하는 많은 개념은 선언적 스타일로 **'무엇을 해결할 것인가'**에 초점을 맞추고 있다.
- 이것은 '어떻게 해결할 것인가'를 고민한느 명령형 접근 방식과 상반

### 1.2.1 순수 함수와 참조 투명성
- 함수형 프로그래밍에서는 함수를 순수 함수<sub>pure function</sub>와 불순 함수<sub>impure function</sub>로 분류
- `순수 함수`는 다음 두 가지 조건을 만족해야 한다.
  - **동일한 입력에 대해 항상 동일한 출력을 반환한다.**
  - **어떤 사이드 이펙트 없이 자기 충족적 성질을 가진다.**
- 순수 함수 예시
  ```java
  public String toLowercase(String str) {
    return str;
  }
  ```
- 두 가지 조건 중 하나라도 위반하면 `불순 함수`로 간주
- 불순 함수 예시
  
  ```java
  public String buildGreeting(String name) {
    var now = LocalTime.now();
    if (now.getHour() < 12) {
      return "Good morning" + name;
    } else {
      return "Hello " + name; 
    }
  }
  ```
- 단지 코딩 스타일과 패러다임에 따라 다른 방식으로 사용할 뿐, 순수 함수가 불순 함수보다 기능적으로 우수하다는 의미는 아님
- `사이드 이펙트`가 발생하지 않는 표현식이나 순수 함수는 `결정론적`이며 `참조 투명성`의 특징을 가진다.
  - 다른 프로그램을 작성할 때도 코드를 변경하지 않고 재사용할 수 있다.
- 순수성과 참조 투명성은 서로 연결되어 있으며 이는 코드를 이해하고 추론하기 쉽도록 한다.

### 1.2.2 불변성
- `불변성`을 갖는 경우 초기화된 이후에는 자료 구조를 더 이상 변경할 수 없다.

  ➡️ 일관성 보장 / 예측 가능 / 이해하기 쉬움
- 불변 자료 구조는 순수 함수와 마찬가지로 비동기적이고 병렬적인 환경에서 안정적으로 작동하며 동기화 문제나 범위를 벗어난 상태 변경과 같은 문제를 초래하지 않는다.
- 