# Chapter 06. 스트림을 이용한 데이터 처리

- 스트림 API 는 데이터 처리에 대한 `선언적` 이고, `지연 평가` 된 접근법을 제공한다

## 6.1. 반복을 통한 데이터 처리

### 6.1.1. 외부 반복
- 외부 반복 : 무엇을 하는가 (데이터 선택, 변형, 수집) 와 어떻게 수행하는가(ex. for 문을 통한 요소 반복) 이 혼용되는 것
- for문으로 반복하는 것의 큰 문제 중 하나는 `연속적`인 순회 과정이 필요하다는 것이다
  - 병렬 데이터 처리가 필요할 경우 전체 루프 구조 재작성 필요

### 6.1.2. 내부 반복
- 내부 반복에서는, 반복자를 사용하는 대신, 데이터 처리 로직이 스스로 **반복을 수행하는 파이프라인을 사전에 구성**한다
- **'무엇을 하고 싶은지' 에 집중할 수 있으며**, '어떻게 수행되는지' 에 대한 반복적인 작업은 걱정하지 않아도 된다
- `스트림`은 이러한 내부 반복을 가진 `데이터 파이프라인`의 예시이다

## 6.2. 함수형 데이터 파이프라인으로써의 스트림
- 선언적 접근법
  - 간단하고 명료한 **다단계 데이터 파이프라인** 구축
- 조합성
  - 데이터 처리를 위한 고차함수로 이루어진 연산들을 **조합**하여 사용할 수 있다
- 지연처리
  - **마지막 연산이 파이프라인에 연결된 이후** 각 요소가 하나식 순차적으로 파이프라인을 통해 처리되므로 필요한 연산 수를 줄일 수 있음
- 성능 최적화
  - 연산 종류에 따라 **순회방식을 자동 최적화**
- 병렬 데이터 처리
  - **내장된 병렬 처리** 기능을 가짐
- 스트림은 데이터 처리 기능을 제공하는 방식으로, `느긋한 순차 데이터 파이프라인` 이라고 말할 수 있다
1. 스트림 생성
   - **연속적**인 요소를 제공할 수 있다면 스트림으로 변환 가능
2. 중간 연산 수행
   - Stream 의 메소드로 제공되는 **고차함수**로, 파이프라인 통과하는 요소를 대상으로 필터링, 매핑, 정렬 등의 작업 수행
   - 각 연산은 새로운 스트림 반환, 이를 통해 원하는 만큼의 다양한 중간 연산과 연결될 수 있다
3. 종료 연산 수행
    - **종료 연산은 파이프라인 설계를 완료**하고 실제 데이터 처리를 시작한다
- 스트림은 `어떻게` 실행되는지 복잡한 설명 없이 `무엇이` 발생하는지를 선언적으로 나타낸다

### 6.2.1. 스트림의 특성
#### 느긋한 계산법
- 스트림의 중간 연산의 호출은 **파이프라인을 단순히 '확장'**하고, 새롭게 지연평가된 스트림을 반환한다
- 파이프라인은 모든 연산을 모아두고, **종료 연산 호출 전까지는 아무런 작업도 시작하지 않는다**

#### 보일러플레이트 최소화
- 스트림은 데이터처리를 **하나의 메서드 호출 체인으로 단순화**하여, 데이터 처리 로직의 복잡성을 명료하고 표현력 있게 풀어낸다
